#!/usr/bin/env xonsh

if len($ARGS) < 2:
	import os
	print("usage: {} [xpath] [file ...]".format(os.path.split($ARGS[0])[1]))
else:
	pattern = $ARGS[1]
	for filename in $ARGS[2:]:
		lint = $(xmllint --xpath @(pattern) @(filename))
		if len(lint.strip()) > 0:
			print("{}:".format(filename))
			print(lint)
			print()
